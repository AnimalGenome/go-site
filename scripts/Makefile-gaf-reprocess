BASE_NAMES = $(notdir $(filter-out /opt/go-site/annotations/%.gpi.gz,$(wildcard /opt/go-site/annotations/*)))

all: $(foreach name,$(BASE_NAMES),/opt/go-site/annotations_new/$(name))

%.gz: %
	pigz $<

/opt/go-site/annotations_new/%.gaf: /opt/go-site/annotations/%.gaf /opt/go-site/gaferencer-products/gaferences.json
	ontobio-parse-assocs.py -f $< -F gaf -o $@ -I /opt/go-site/gaferencer-products/gaferences.json --report-md /tmp/report.md --report-json /tmp/report.json convert -to gaf

/opt/go-site/annotations_new/%.gpad: /opt/go-site/annotations/%.gpad /opt/go-site/gaferencer-products/gaferences.json
	ontobio-parse-assocs.py -f $< -F gpad -o $@ -I /opt/go-site/gaferencer-products/gaferences.json --report-md /tmp/report.md --report-json /tmp/report.json convert -to gpad

%: %.gz
	unpigz $<
